<mat-toolbar color="primary" style="border-bottom: 15px solid #111111">
    <mat-toolbar-row></mat-toolbar-row>
    <mat-toolbar-row>
        <div class="layout-header-container">
            <p id="larger-text" class="layout-header-text comic-text">
                Bob's Computer Repair Shop <br /><br /><br />
            </p>
        </div>
    </mat-toolbar-row>
    <mat-toolbar-row></mat-toolbar-row>
</mat-toolbar>

<br /><br /><br />

<div fxLayout="column">
    <br /><br />
    <mat-card fxFlex class="card-container mat-elevation-z4">
        <mat-card-title>
            <h1 class="title">
                Account Registration Form<br />
                <span class="subtitle">
                    Fields marked with an asterisk (*) are required.
                </span>
            </h1>
        </mat-card-title>

    </mat-card>
</div>

<mat-card-content fxLayout="column" fxLayoutGap="10px">
    <mat-horizontal-stepper #stepper linear>


        <mat-step fxFlex [stepControl]="contactForm" class="required" errorMessage="Contact is required">
            <form [formGroup]="contactForm">
                <ng-template matStepLabel>Contact Information</ng-template>

                <br />
                <mat-list>
                    <mat-list-item>
                        <mat-form-field fxFlex appearance="fill">
                            <mat-label>First Name</mat-label>
                            <input matInput required formControlName="firstName" />

                            <mat-error class="error"
                                *ngIf="contactForm.controls['firstName'].hasError('required') && contactForm.controls['firstName'].touched">
                                First name is a required field.
                            </mat-error>
                        </mat-form-field>


                        <mat-form-field fxFlex appearance="fill">
                            <mat-label>Last Name</mat-label>
                            <input matInput required formControlName="lastName" />

                            <mat-error class="error"
                                *ngIf="contactForm.controls['lastName'].hasError('required') && contactForm.controls['lastName'].touched">
                                Last name is a required field.
                            </mat-error>
                        </mat-form-field>
                    </mat-list-item>

                    <br /><br />

                    <mat-list-item>
                        <mat-form-field fxFlex appearance="fill">
                            <mat-label>Phone number</mat-label>
                            <input matInput required formControlName="phoneNumber" />

                            <mat-error class="error"
                                *ngIf="contactForm.controls['phoneNumber'].hasError('required') && contactForm.controls['phoneNumber'].touched">
                                Phone number is a required field.
                            </mat-error>
                        </mat-form-field>



                        <mat-form-field fxFlex appearance="fill">
                            <mat-label>Email</mat-label>
                            <input matInput required formControlName="email" />

                            <mat-error class="error"
                                *ngIf="contactForm.controls['email'].hasError('required') && contactForm.controls['email'].touched">
                                Email is a required field.
                            </mat-error>

                            <mat-error class="error"
                                *ngIf="contactForm.controls['email'].hasError('required') && contactForm.controls['email'].touched">
                                Invalid email format.
                            </mat-error>
                        </mat-form-field>
                    </mat-list-item>]

                    <br /><br />
                    <mat-list-item>
                        <mat-form-field fxFlex appearance="fill">
                            <mat-label>Address</mat-label>
                            <text-area matInput required formControlName="address"></text-area>

                            <mat-error class="error"
                                *ngIf="contactForm.controls['address'].hasError('required') && contactForm.controls['address'].touched">
                                Address is a required field.
                            </mat-error>

                        </mat-form-field>
                    </mat-list-item>
                </mat-list>

                <br />
                <div fxLayoutAlign="end">
                    <button mat-raised-button color="primary" matStepperNext>Next</button>
                </div>

            </form>
        </mat-step>

        <mat-step [stepControl]="sqForm" errorMessage="Security Questions are required">
            <form [formGroup]="sqForm">
                <ng-template matStepLabel>Security Questions</ng-template>

                <br />
                <!-- Security Question 1 -->
                <mat-list>
                    <mat-list-item>
                        <mat-form-field fxFlex appearance="fill">
                            <mat-label>Security Question</mat-label>
                            <mat-select required formControlName="securityQuestion1">
                                <mat-option *ngFor="let question of securityQuestions" [value]="question.text">
                                    {{question.text}}
                                </mat-option>
                            </mat-select>

                            <mat-error class="error"
                                *ngIf="sqForm.controls['securityQuestion1'].hasError('required') && sqForm.controls['securityQuestion1'].touched">
                                Required Field.
                            </mat-error>
                        </mat-form-field>

                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                        <mat-form-field fxFlex appearance="fill">
                            <mat-label>Answer</mat-label>
                            <input required formControlName="answerToSecurityQuestion1" />

                            <mat-error class="error"
                                *ngIf="sqForm.controls['answerToSecurityQuestion1'].hasError('required') && sqForm.controls['answerToSecurityQuestion1'].touched">
                                Required Field.
                            </mat-error>
                        </mat-form-field>
                    </mat-list-item>
                    <!-- End of Security Question 1 -->
                    <br /><br />
                    <!-- Security Question 2 -->
                    <mat-list-item>
                        <mat-form-field fxFlex appearance="fill">
                            <mat-label>Security Question</mat-label>

                            <mat-select required formControlName="securityQuestion2">
                                <mat-option *ngFor="let question of securityQuestions" [value]="question.text">
                                    {{question.text}}
                                </mat-option>
                            </mat-select>

                            <mat-error class="error"
                                *ngIf="sqForm.controls['securityQuestion2'].hasError('required') && sqForm.controls['securityQuestion2'].touched">
                                Required field.
                            </mat-error>
                        </mat-form-field>

                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                        <mat-form-field fxFlex appearance="fill">
                            <mat-label>Answer</mat-label>
                            <input required matInput formControlName="answerToSecurityQuestion2" />

                            <mat-error class="error"
                                *ngIf="sqForm.controls['answerToSecurityQuestion2'].hasError('required') && sqForm.controls['answerToSecurityQuestion2'].touched">
                                Required field.
                            </mat-error>
                        </mat-form-field>
                    </mat-list-item>
                    <!-- End of Security Question 2 -->
                    <br /><br />
                    <!-- Beginning Security Question 3 -->
                    <mat-list-item>
                        <mat-form-field fxFlex appearance="fill">
                            <mat-label>Security Question</mat-label>

                            <mat-select required formControlName="securityQuestion3">
                                <mat-option *ngFor="let question of securityQuestions" [value]="question.text">
                                    {{question.text}}
                                </mat-option>
                            </mat-select>

                            <mat-error class="error"
                                *ngIf="sqForm.controls['securityQuestion3'].hasError('required') && sqForm.controls['securityQuestion3'].touched">
                                Required field.
                            </mat-error>
                        </mat-form-field>

                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                        <mat-form-field fxFlex appearance="fill">
                            <mat-label>Answer</mat-label>
                            <input required matInput formControlName="answerToSecurityQuestion3" />

                            <mat-error class="error"
                                *ngIf="sqForm.controls['answerToSecurityQuestion3'].hasError('required') && sqForm.controls['answerToSecurityQuestion3'].touched">
                                Required field.
                            </mat-error>
                        </mat-form-field>
                    </mat-list-item>
                </mat-list>
                <!-- End Security Question 3 -->
                <br />
                <div fxLayoutAlign="end">
                    <button mat-raised-button color="accent" matStepperPrevious>Back</button> &nbsp;&nbsp;
                    <button mat-raised-button color="primary" [disabled]="!sqForm.valid" matStepperNext>Next</button>
                </div>
            </form>
        </mat-step>

        <mat-step [stepControl]="credForm" errorMessage="Credentials are required">
            <form [formGroup]="credForm">
                <ng-template matStepLabel>Credentials</ng-template>

                <br />

                <p-messages [(value)]="errorMessages" [enableService]="false"></p-messages>

                <div class="register-credentials-container">
                    <mat-list>
                        <mat-list-item>
                            <mat-form-field fxFlex appearance="fill">
                                <mat-label>Username</mat-label>
                                <input required matInput formControlName="userName" />

                                <mat-error class="error"
                                    *ngIf="credForm.controls['userName'].hasError('required') && credForm.controls['userName'].touched">
                                    Username is a required field.
                                </mat-error>
                            </mat-form-field>
                        </mat-list-item>

                        <br /><br />

                        <mat-list-item>
                            <mat-form-field fxFlex appearance="fill">
                                <mat-label>Password</mat-label>
                                <input required matInput type="password" formControlName="password" />

                                <mat-error class="error"
                                    *ngIf="credForm.controls['password'].hasError('required') && credForm.controls['password'].touched">
                                    Password is a required field
                                </mat-error>

                                <mat-error class="error"
                                    *ngIf="credForm.controls['password'].hasError('required') && credForm.controls['password'].touched">
                                    Password must be at least 8 characters, contain one letter, and one number.
                                </mat-error>
                            </mat-form-field>
                        </mat-list-item>
                    </mat-list>

                    <br />
                    <div fxLayoutAlign="end">
                        <button mat-raised-button color="accent" matStepperPrevious>Back</button> &nbsp;&nbsp;
                        <button mat-raised-button (click)="register()" [disabled]="!credForm.valid"
                            color="primary">Register</button>
                    </div>
                </div>
            </form>
        </mat-step>
    </mat-horizontal-stepper>

    <div>
        <a routerLink="/session/login" class="register-footer-link">Employee Sign In</a>
    </div>

</mat-card-content>