<!--
 Title: Bobs Computer Repair Shop
 Author: Professor Krasso
 Date: 02/12/2023
 Modified By: Manel Phiseme
Attributions: class lecture
-->
<div fxLayout ="column">
    <mat-card class="mat-elevation-z0">
        <mat-card-title style="text-align: center; font-weight: lighter;">Create User Form</mat-card-title>
        <mat-card-subtitle style="text-align: center; font-weight: lighter;">
        Fields marked with an asterisk (*) are required.
    </mat-card-subtitle>
    <br/>

    <p-messages [(value)]="errorMessages" [enableService]="false"></p-messages>
     
    
    <form [formGroup]="form" (ngSubmit)="createUser()" (keydown.enter)="$event.preventDefault()" style="width: 50%; margin: 0 auto;">
        <mat-card-content>
            <div fxLayout="column" fxLayoutGap="10px">
                <mat-form-field appearance="fill">
                    <mat-label>Username</mat-label>
                    <input 
                      type="text"
                      matInput
                      formControlName="userName"
                      required />
                    <mat-error class="error" *ngIf="form.controls['userName'].hasError('required') && form.controls['userName'].touched">
                        Username is a required field
                    </mat-error>
                </mat-form-field> 
                
                <!-- Form field for password-->
                <mat-form-field appearance="fill">
                    <mat-label>Password</mat-label>
                    <input
                      type="password"
                      matInput
                      formControlName="password"
                      required />

                    <mat-error class="error" *ngIf="form.controls['password'].hasError('required') && form.controls['password'].touched">
                        Password is a required field.
                    </mat-error>

                    <mat-error class="error" *ngIf="form.controls['password'].hasError('pattern') && form.controls['password'].touched">
                        Password must be at least 8 characters, contain one letter, and one number.
                    </mat-error>
                </mat-form-field>

                 <!-- Form field for first Name-->
                <mat-form-field appearance="fill">
                    <mat-label>First name</mat-label>
                    <input
                     type="text"
                     matInput
                     formControlName="firstName"
                     required />

                     <mat-error class="error" *ngIf="form.controls['firstName'].hasError('required') && form.controls['firstName'].touched">
                        First name is a required field.
                     </mat-error>
                </mat-form-field>

                <!-- Form field for Last name-->
                <mat-form-field appearance="fill">
                    <mat-label>Last name</mat-label>
                    <input 
                     type="text"
                     matInput
                     formControlName="lastName"
                     required />

                     <mat-error class="error" *ngIf="form.controls['lastName'].hasError('required') && form.controls['lastName'].touched">
                        Last name is required field.
                     </mat-error>
                </mat-form-field>
                
                 <!-- Form field for Last phon number-->
                <mat-form-field appearance="fill">
                    <mat-label>Phone number</mat-label>
                    <input 
                     type="text"
                     matInput
                     formControlName="phoneNumber"
                     required />

                     <mat-error class="error" *ngIf="form.controls['phoneNumber'].hasError('required') && form.controls['phoneNumber'].touched">
                        Phone number is a required field.
                     </mat-error>
                </mat-form-field>
                 
                <!-- Form field for Email address-->
                <mat-form-field appearance="fill">
                    <mat-label>Email address</mat-label>
                    <input 
                     type="text"
                     matInput
                     formControlName="email"
                     required />

                     <mat-error class="error" *ngIf="form.controls['email'].hasError('required') && form.controls['email'].touched">
                        Email is a required field.
                     </mat-error>

                     <mat-error class="error" *ngIf="form.controls['email'].hasError('email') && form.controls['email'].touched">
                        Invalid email format.
                     </mat-error>
                </mat-form-field>

                <mat-form-field appearance="fill">
                    <mat-label>Address</mat-label>

                    <textarea
                     type="text"
                     matInput
                     formControlName="address"
                     placeholder="201 main ave. Fort Myers, FL 33765"></textarea>

                     <mat-error class="error" *ngIf="form.controls['address'].hasError('required') && form.controls['address'].touched">
                        Address is a required field.
                     </mat-error>
                </mat-form-field>
            </div>
        </mat-card-content>

        <br/>
        <mat-card-action align="end">
            <!-- The button for the form-->
            <button mat-raised-button (click)="cancel()" color="accent">Cancel</button>
            <button mat-raised-button [disabled]="!form.valid" color="primary">Submit</button>
        </mat-card-action>
    </form>
    </mat-card>
</div>
