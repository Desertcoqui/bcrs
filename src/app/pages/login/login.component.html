<!--
 Title: login.component.html (Bobs Computer Repair Shop)
 Author: Professor Krasso
 Date: 02/12/2023
 Modified By: Manel Phiseme
Attributions: class lecture
-->

<mat-toolbar color="primary" style="border-bottom: 15px solid #222222">
    <mat-toolbar-row></mat-toolbar-row>
    <mat-toolbar-row>
        <div class="layout-header-container">
            <p id="large-tex" class="layout-header-text comic-text">
                Bob's Computer Repair shop <br /><br /><br />
            </p>
        </div>
    </mat-toolbar-row>
    <mat-toolbar-row></mat-toolbar-row>
</mat-toolbar>

<div fxlayout="row wrap" fxLayoutAlign="center start">
    <div fxFlex="65">

        <br /><br />

        <mat-card class="card-container mat-elevation-z4">

            <!--The Form header-->
            <mat-card-header>
                <mat-card-title class="mat-headline card-title login-title">Employee Sign-in Page</mat-card-title>

                <mat-card-subtitle style="text-align: center;" class="login-subtitle">
                    You must enter a valid username and password to proceed.
                </mat-card-subtitle>
            </mat-card-header>

            <br />

            <mat-card-content>

                <!--if there is an error message-->

                <p-messages [(value)]="errorMessage" [enableService]="false"></p-messages>

                <mat-card class="mat-elevation-z0">


                    <form [formGroup]="loginForm" (ngSubmit)="login(); loginForm.reset()">

                        <mat-card-content fxLayout="column" fxLayoutGap="10px">

                            <!--Below are the form field for password, username -->
                            <mat-form-field fxFlex appearance="fill">
                                <mat-label>Username</mat-label>
                                <input type="text" matInput formControlName="userName" />

                                <mat-error class="error"
                                    *ngIf="loginForm.controls['userName'].hasError('required ') && loginForm.controls['userName'].touched">
                                    Username is a required field.
                                </mat-error>
                            </mat-form-field>

                            <mat-form-field fxFlex appearance="fill">
                                <mat-label>password</mat-label>
                                <input type="password" matInput formControlName="password" />

                                <mat-error class="error"
                                    *ngIf="loginForm.controls['password'].hasError('required ') && loginForm.controls['password'].touched">
                                    Password is a required field.
                                </mat-error>

                                <mat-error class="error"
                                    *ngIf="loginForm.controls['password'].hasError('pattern ') && loginForm.controls['password'].touched">
                                    Password must be at least 8 characters, contain one letter, and one number.
                                </mat-error>
                            </mat-form-field>

                        </mat-card-content>

                        <mat-card-actions>
                            <button type="submit" style="height: 50px; font-size: 18px" [disabled]="!loginForm.valid"
                                fxFlex mat-raised-button color="accent">Submit</button>
                        </mat-card-actions>

                        <br />

                        <!-- The form footer links -->
                        <div fxLayout="row">
                            <div class="login-footer-container">
                                <div fxFlex class="center-text">
                                    <a class="login-footer-link" routerLink="/session/register">Create new account</a>
                                </div>

                                <div fxFlex class="center-text">
                                    <a class="login-footer-link" routerLink="/session/forgot">Forgot password?</a>
                                </div>
                            </div>

                        </div>
                    </form>
                </mat-card>
            </mat-card-content>
        </mat-card>
    </div>
</div>
